<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shopping Cart</title>
    <!-- Link for Bootstrap-->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" 
    integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" 
    crossorigin="anonymous">

    <!-- Link for Boxicon-->
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>


    <!-- Link for CSS-->
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-light bg-white py-3 fixed-top">
            <img src="new_logo.png" alt="display img" height="50" width="auto">
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span><i id="bar" class='bx bx-menu'></i></span>
            </button>
        
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav ml-auto">

                    <li class="nav-item">
                    <a class="nav-link" href="index.html">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="shop.html">Shop</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="blog.html">Blog</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="about.html">About</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="contact.html">Contact Us</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" href="#"><i class='bx bx-shopping-bag'></i></a>
                    </li>
                </ul>
            </div>
    </nav>

    <section id="blog-home" class="pt-5 mt-5 container my-5">
        <h2 class="font-weight-bold pt-5">Shopping Cart</h2>
        <hr>
    </section>

    <section id="cart-container" class="container my-5">
        <table width="100%">
            <thead>
                <tr>
                    <th>Remove</th>
                    <th>Image</th>
                    <th>Name</th>
                    <th>Price</th>
                    <th>Quantity</th>
                    <th>Size</th>
                    <th>Total</th>
                </tr>
            </thead>
            <tbody id="cartItems"></tbody>
        </table>
    </section>

    <section id="cart-bottom" class="container">
        <div class="row">
            <div class="coupon col-lg-6 col-md-6 col-12 mb-4">
                <div>
                    <h5>COUPON</h5>
                    <p>Enter your coupon here if you have one!</p>
                    <input type="text" placeholder="Coupon Code">
                    <button>APPLY COUPON</button>
                </div>
            </div>
            <div class="total col-lg-6 col-md-6 col-12">
                <div>
                    <h5>CART TOTAL</h5>
                    <div class="d-flex justify-content-between">
                        <h6>Subtotal</h6>
                        <p class="subtotal">$xx.xx</p>
                    </div>
                    <div class="d-flex justify-content-between">
                        <h6>Shipping</h6>
                        <p>$5.99</p>
                    </div>
                    <hr class="second-hr">
                    <div class="d-flex justify-content-between">
                        <h6>Total</h6>
                        <p class="total">$xx.xx</p>
                    </div>
                    <button class="ml-auto">PROCEED TO CHECKOUT</button>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="mt-5 py-5">
        <div class="row container mx-auto pt-5">
            <div class="footer-one col-lg-3 col-md-6 col-12">
                <img src="new_logo_dark.png" alt="" width="250px" height="Auto">
                <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Eum aut itaque dolor aperiam tenetur 
                    recusandae optio obcaecati, quae.</p>
            </div>
                <div class="footer-one col-lg-3 col-md-6 col-12">
                    <h5 class="pb-2">Featured</h5>
                    <ul class="text-uppercase list-unstyled">
                        <li> <a href="#">Clothes</a></li>
                        <li> <a href="#">Shoes</a></li>
                        <li> <a href="#">Watches</a></li>
                        <li> <a href="#">Winter Wear</a></li>
                        <li> <a href="#">Popular</a></li>
                    </ul>
                </div>
                <div class="footer-one col-lg-3 col-md-6 col-12">
                    <h5 class="pb-2">Contact Us</h5>
                    <div>
                        <h6 class="text-uppercase">Address</h6>
                        <p>123 random street, city, State</p>
                    </div>
                    <div>
                        <h6 class="text-uppercase">Phone</h6>
                        <p>(123) 456 - 7890</p>
                    </div>
                    <div>
                        <h6 class="text-uppercase">Email</h6>
                        <p>email@example.com</p>
                    </div>
                </div>
                <div class="footer-one col-lg-3 col-md-6 col-12">
                    <h5 class="pb-2">Social Media</h5>
                    <div class="row">
                        <img class="img-fluid w-25 h-100 m-2" src="https://i.pinimg.com/736x/ca/d8/22/cad82236256b59eae76ad2d29f7131c3.jpg" alt="">
                        <img class="img-fluid w-25 h-100 m-2" src="https://www.theretailatoz.com/wp-content/uploads/2017/06/mens-clothing.jpg" alt="">
                        <img class="img-fluid w-25 h-100 m-2" src="https://assets.siccode.com/i-n-b/naics-code-448110-mens-clothing-stores.jpg" alt="">
                        <img class="img-fluid w-25 h-100 m-2" src="https://static01.nyt.com/images/2012/09/06/nyregion/Y-MENSWEAR2/Y-MENSWEAR2-jumbo.jpg" alt="">
                        <img class="img-fluid w-25 h-100 m-2" src="https://img2023.weyesimg.com/uploads/ouyeedisplays.allweyes.com/images/15324353991824.jpg?imageView2/2/w/1920/q/75" alt="">
                    </div>
                </div>
        </div>
        <div class="copyright mt-5">
            <div class="row container mx-auto">
                <div class="col-lg-3 col-md-6 col-12 mb-4">
                    <img src="https://thetechportal.com/wp-content/uploads/2020/04/stripe-payments-the-tech-portal-800x430.png" alt="" width="75px" height="auto">
                </div>
                <div class="col-lg-4 col-md-6 col-12 text-nowrap mb-2">
                    <p>VATICA TECH Â© 2023 All Rights Reserved</p>
                </div>
                <div class="col-lg-4 col-md-6 col-12">
                    <a href="#"><i class='bx bxl-youtube'></i></a>
                    <a href="#"><i class='bx bxl-instagram'></i></a>
                    <a href="#"><i class='bx bxl-facebook'></i></a>
                </div>
            </div>
        </div>

    </footer>
    
    <!-- Links for Popper and JS-->
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>

<script src="main.js"></script>

<script>
    // Retrieve cart items from localStorage
    var cart = localStorage.getItem('cart');
    cart = cart ? JSON.parse(cart) : [];

    // Display cart items
    var cartItemsContainer = document.getElementById('cartItems');

    function displayCartItems() {
    cartItemsContainer.innerHTML = ''; // Clear the container

    var subtotal = 0;

    cart.forEach(function(product, index) {
        var priceWithoutSymbol = parseFloat(product.price.replace('$', ''));
        var quantity = parseInt(product.quantity);
        var total = quantity * priceWithoutSymbol;
        subtotal += total;

        var row = document.createElement('tr');
        row.innerHTML = `
            <td><a href="#" onclick="removeProduct(${index})"><i class='bx bxs-trash-alt'></i></a></td>
            <td><img src="${product.image}" alt="${product.name}" style="max-width: 100px;"></td>
            <td><h5>${product.name}</h5></td>
            <td><h5>${product.price}</h5></td>
            <td><h5>${product.quantity}</h5></td>
            <td><h5>${product.size}</h5></td>
            <td><h5>$${total.toFixed(2)}</h5></td>
        `;
        cartItemsContainer.appendChild(row);
    });

    var subtotalElement = document.querySelector('.total h6:nth-child(1) + p');
    if (subtotalElement) {
        subtotalElement.textContent = `$${subtotal.toFixed(2)}`;
    }

    var shippingCost = 5.99;
    var newTotal = subtotal + shippingCost;
    var totalElement = document.querySelector('.total p.total');
    if (totalElement) {
        totalElement.textContent = `$${newTotal.toFixed(2)}`;
    }

    // Coupon functionality
    var applyCouponBtn = document.querySelector('.coupon button');
    applyCouponBtn.addEventListener('click', function() {
        var couponInput = document.querySelector('.coupon input[type="text"]');
        var couponCode = couponInput.value.trim();

        var validCouponCode = 'a'; // Replace with your actual coupon code
        var shippingCost = 5.99;
        var subtotal = parseFloat(subtotalElement.textContent.replace('$', ''));
        var newTotal = subtotal + shippingCost; // Use newTotal here

        if (couponCode === validCouponCode) {
            var discount = newTotal * 0.1; // 10% discount
            newTotal -= discount; // Apply the discount

            var totalElement = document.querySelector('.total p.total');
            if (totalElement) {
                totalElement.textContent = `$${newTotal.toFixed(2)}`;
            }
        } else {
            alert('Coupon is incorrect!');
        }
    });
}

    displayCartItems(); // Call the display function initially to show the cart items

    // Function to remove a product
  function removeProduct(index) {
    // Remove the product from the cart array
    cart.splice(index, 1);

    // Update localStorage with the modified cart
    localStorage.setItem('cart', JSON.stringify(cart));

    // Refresh the displayed cart items
    displayCartItems();
  }

</script>

</body>
</html>